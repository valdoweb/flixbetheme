/*
Theme Name: Flixbe
Description: Minimal WordPress block theme.
Version: 1.0.0
Author: Valdoweb
License: GPL v2 or later
Text Domain: flixbe
*/

/* Base / Reset */
* { box-sizing: border-box; }
html, body {
  overflow-x: hidden;
  max-width: 100%;
  font-family: var(--wp--preset--font-family--system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif);
}
body {
  margin:0;
  padding:0;
  padding-top:80px;
  transition:.3s ease;
}
body.admin-bar { padding-top:80px; }
@media (max-width:782px){
  body.admin-bar { padding-top:80px; }
}

/* Header */
.site-header {
  position:fixed;
  top:0; left:0; right:0;
  z-index:1000;
  display:flex;
  align-items:center;
  background:rgba(255,255,255,.95);
  backdrop-filter:blur(10px);
  border-bottom:1px solid rgba(0,0,0,.08);
  box-shadow:none;
  transition:background-color .3s ease, box-shadow .3s ease, border-color .3s ease;
}
.site-header.is-scrolled {
  box-shadow:0 2px 20px rgba(0,0,0,.12);
  border-color:rgba(0,0,0,.12);
  background:rgba(255,255,255,.95);
}

/* Admin bar offset */
body.admin-bar .site-header { top:32px; }
@media (max-width:782px){
  body.admin-bar .site-header { top:46px; }
}

/* Header inner */
.site-header .wp-block-group {
  margin:0;
  display:flex;
  align-items:center;
  width:100%;
}
.site-header .wp-block-group.alignwide {
  max-width:var(--wp--style--global--wide-size,1400px);
  margin:0 auto;
  padding:0 1rem;
}

/* Branding */
.site-branding {
  display:flex;
  align-items:center;
  gap:.5rem;
  height:100%;
  max-width:250px;
  flex:0 0 250px;
}
.site-branding .wp-block-site-logo img { display:block; height:auto; }
.site-branding .wp-block-site-logo ~ .wp-block-site-title { display:none; }
.wp-block-site-title,
.site-header .wp-block-site-title {
  margin:0;
  line-height:1.2;
  display:flex;
  align-items:center;
}
.wp-block-site-title a {
  text-decoration:none;
  font-weight:600; /* was 500 */
  color:var(--wp--preset--color--fg);
}

.site-header .wp-block-navigation a:hover {
  transform: translateY(-2px);
  color: inherit; /* was var(--wp--preset--color--primary) */
}

/* Mobile / Overlay (scoped only to header) */
.site-header .wp-block-navigation__responsive-container-open,
.site-header .wp-block-navigation__responsive-container-close,
.site-header .wp-block-navigation__toggle_button_label {
  margin-left:auto !important;
}
.site-header .wp-block-navigation .wp-block-navigation__responsive-container {
  justify-content:flex-end;
}
.site-header .wp-block-navigation__responsive-container.is-menu-open {
  position:fixed !important;
  inset:0;
  width:100vw !important;
  height:100vh !important;
  z-index:99998 !important;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  justify-content:flex-start;
  padding:var(--overlay-top-pad,2rem) var(--overlay-side-pad,2rem);
  background:var(--overlay-bg,rgba(255,255,255,.96));
  color:var(--overlay-fg,#111);
  text-align:left;
}
.site-header .wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__container {
  flex-direction:column;
  align-items:flex-start;
  gap:1rem;
  width:100%;
}
.site-header .wp-block-navigation__responsive-container-close {
  position:fixed;
  top:10px; right:10px;
  z-index:99999 !important;
}
.site-header .wp-block-navigation__responsive-container-close svg,
.site-header .wp-block-navigation__responsive-container-open svg { width:40px; height:40px; }
.site-header .wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content {
  padding:0;
  width:100%;
}

/* Buttons */
.wp-block-button__link {
  border:none;
  border-radius:.75rem;
  padding:.875rem 2rem;
  font-weight:600; /* was 500 */
  text-decoration:none;
  transition:.3s ease;
  box-shadow:0 4px 15px rgba(0,0,0,.1);
  min-height:44px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
.wp-block-button__link:hover {
  transform:translateY(-2px);
  box-shadow:0 8px 25px rgba(0,0,0,.15);
}
.has-primary-background-color {
  background:linear-gradient(135deg,var(--wp--preset--color--primary),#3b82f6) !important;
}
.has-accent-background-color {
  background:linear-gradient(135deg,var(--wp--preset--color--accent),#059669) !important;
}

/* Footer */
.site-footer {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  border-top:1px solid rgba(0,0,0,.1);
  transition:.3s ease;
}
.site-footer p { margin:0; }

/* Search */
.wp-block-search { max-width:400px; margin:2rem auto; }
.wp-block-search__input {
  border-radius:.75rem;
  border:2px solid var(--wp--preset--color--primary);
  padding:.875rem 1rem;
  font-size:1rem;
  transition:.3s ease;
}
.wp-block-search__input:focus {
  outline:none;
  box-shadow:0 0 0 3px rgba(37,99,235,.2);
  transform:scale(1.02);
}
.wp-block-search__button {
  background:var(--wp--preset--color--primary);
  border:none;
  border-radius:.75rem;
  padding:.875rem 1.5rem;
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition:.3s ease;
}
.wp-block-search__button:hover {
  background:#1d4ed8;
  transform:translateY(-2px);
}

/* Separator */
.wp-block-separator {
  border:none;
  height:2px;
  background:linear-gradient(90deg,transparent,var(--wp--preset--color--muted),transparent);
  margin:3rem 0;
}

/* Content width handling */
main { margin-block-start: 0; }
main.wp-block-group { padding:0 1rem; margin-top:0; }
.wp-block-post-content { margin-top:0; padding-top:0; }

main > .wp-block-heading:not(.alignwide):not(.alignfull),
main > .wp-block-paragraph:not(.alignwide):not(.alignfull),
main > .wp-block-list:not(.alignwide):not(.alignfull),
main > .wp-block-quote:not(.alignwide):not(.alignfull),
main > .wp-block-image:not(.alignwide):not(.alignfull),
main > .wp-block-table:not(.alignwide):not(.alignfull),
main > .wp-block-columns:not(.alignwide):not(.alignfull),
main > .wp-block-media-text:not(.alignwide):not(.alignfull),
.wp-block-post-content > .wp-block-heading:not(.alignwide):not(.alignfull),
.wp-block-post-content > .wp-block-paragraph:not(.alignwide):not(.alignfull),
.wp-block-post-content > .wp-block-list:not(.alignwide):not(.alignfull),
.wp-block-post-content > .wp-block-quote:not(.alignwide):not(.alignfull),
.wp-block-post-content > .wp-block-image:not(.alignwide):not(.alignfull),
.wp-block-post-content > .wp-block-table:not(.alignwide):not(.alignfull),
.wp-block-post-content > .wp-block-columns:not(.alignwide):not(.alignfull),
.wp-block-post-content > .wp-block-media-text:not(.alignwide):not(.alignfull) {
  max-width:var(--wp--style--global--content-size,1000px);
  margin-left:auto;
  margin-right:auto;
  padding:0 1rem;
}
.alignwide {
  max-width:var(--wp--style--global--wide-size,1400px);
  margin-left:auto;
  margin-right:auto;
  padding:0 1rem;
}

/* Constrain single title and featured image (no Group wrapper) */
main.alignwide > .wp-block-post-title:not(.alignwide):not(.alignfull),
main.alignwide > .wp-block-post-featured-image:not(.alignwide):not(.alignfull) {
  max-width: var(--wp--style--global--content-size, 1000px);
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
}

/* Single: perfectly align title, featured image, and content */
main.alignwide > .wp-block-post-title,
main.alignwide > .wp-block-post-featured-image,
main.alignwide > .wp-block-post-content {
  max-width: var(--wp--style--global--content-size, 1000px);
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
}

/* Normalize vertical spacing and remove stray figure margins */
main.alignwide > .wp-block-post-title { margin-block: 1.5rem 1rem; }
main.alignwide > .wp-block-post-featured-image { margin-block: 1.5rem; }
main.alignwide > .wp-block-post-featured-image figure { margin: 0; }
main.alignwide > .wp-block-post-featured-image img { display: block; width: 100%; height: auto; }

/* Core alignments: prevent horizontal scrollbar */
.alignfull,
.wp-site-blocks .alignfull,
.is-layout-constrained > .alignfull {
  width: 100% !important;
  max-width: 100% !important;
}

/* Fullscreen styles: prevent horizontal scrollbar */
.is-style-fullscreen,
.wp-block-group.is-style-fullscreen,
.wp-block-flixbe-hero.is-style-fullscreen,
.is-style-full-viewport,
.wp-block-group.is-style-full-viewport,
.wp-block-flixbe-hero.is-style-full-viewport {
  width: 100% !important;
  max-width: none !important;
  min-height: 100vh;
}

/* Width-only */
.is-style-fullscreen-width,
.wp-block-group.is-style-fullscreen-width,
.wp-block-flixbe-hero.is-style-fullscreen-width {
  width: 100% !important;
  max-width: none !important;
}

/* Height-only */
.is-style-fullscreen-height,
.wp-block-group.is-style-fullscreen-height,
.wp-block-flixbe-hero.is-style-fullscreen-height {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Alternative approach: disable max-width on constrained parents containing full-width children */
.is-layout-constrained:has(.alignfull),
.is-layout-constrained:has(.is-style-fullscreen),
.is-layout-constrained:has(.is-style-fullscreen-width) {
  max-width: none !important;
}

/* Fancy demo styles for fullscreen variants */
.wp-block-group.is-style-fullscreen[style*="padding-top:3rem"],
.wp-block-group.is-style-full-viewport[style*="padding-top:3rem"] {
  background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:none;
}

/* Focus / Accessibility */
*:focus-visible {
  outline:2px solid var(--wp--preset--color--primary);
  outline-offset:2px;
  border-radius:.25rem;
}
*:focus:not(:focus-visible){ outline:none; }
/* Keep button focus global; nav focus is scoped below */
.wp-block-button__link:focus-visible {
  outline:3px solid var(--wp--preset--color--primary);
  outline-offset:2px;
  box-shadow:0 0 0 1px #fff,0 0 0 4px var(--wp--preset--color--primary);
}
/* Nav focus (only header) */
.site-header .wp-block-navigation a:focus-visible {
  outline:3px solid var(--wp--preset--color--primary);
  outline-offset:2px;
  box-shadow:0 0 0 1px #fff,0 0 0 4px var(--wp--preset--color--primary);
}

/* Skip link */
.skip-link {
  position:absolute;
  top:-100px;
  left:-10000px;
  background:var(--wp--preset--color--fg);
  color:var(--wp--preset--color--bg);
  padding:8px 16px;
  font-weight:600;
  border-radius:4px;
  z-index:10000;
  opacity:0;
  transition:.3s ease;
  text-decoration:none;
}
.skip-link:focus { top:10px; left:10px; opacity:1; }

/* Form elements */
input, textarea, select {
  border:2px solid var(--wp--preset--color--muted);
  padding:.75rem;
  border-radius:.5rem;
  font-size:1rem;
  line-height:1.5;
}
input:focus, textarea:focus, select:focus {
  outline:3px solid var(--wp--preset--color--primary);
  outline-offset:2px;
  border-color:var(--wp--preset--color--primary);
}
.has-error { border-color:#dc2626 !important; color:#dc2626; }
.has-success { border-color:#16a34a !important; color:#16a34a; }

/* Overlay design tokens */
:root {
  --overlay-bg:rgba(255,255,255,.96);
  --overlay-fg:#111;
  --overlay-link-hover:#503aa8;
  --overlay-gap:1.1rem;
  --overlay-side-pad:clamp(16px,5vw,48px);
  --overlay-top-pad:clamp(16px,6vh,64px);
  --overlay-font-size:clamp(18px,2.2vw,22px);
  --overlay-heading-size:clamp(24px,3vw,28px);
  --overlay-close-size:28px;
  --overlay-anim-time:.18s;
  --overlay-sub-indent:1.25rem;
}

/* Reduced motion */
@media (prefers-reduced-motion:reduce){
  *,*::before,*::after {
    animation-duration:.01ms !important;
    animation-iteration-count:1 !important;
    transition-duration:.01ms !important;
    scroll-behavior:auto !important;
  }
}

/* High contrast */
@media (prefers-contrast:high){
  .wp-block-navigation a,
  .wp-block-post-title a,
  .wp-block-button__link { border:2px solid currentColor; }
  .site-header { border-bottom:3px solid var(--wp--preset--color--fg); }
}

/* Utility */
.sr-only {
  position:absolute;
  width:1px; height:1px;
  padding:0; margin:-1px;
  overflow:hidden;
  clip:rect(0 0 0 0);
  white-space:nowrap;
  border:0;
}
button,a,[role="button"] { cursor:pointer; }
button:disabled,a[aria-disabled="true"] { opacity:.6; cursor:not-allowed; }

/* Legacy menu (limit to header only) */
.site-header .primary-navigation { display:none; margin:0; }
.site-header .primary-navigation.toggled { display:block; }
.site-header .primary-navigation ul { list-style:none; margin:0; padding:0; }
.site-header .primary-navigation li { border-bottom:1px solid #e5e5e5; }
.site-header .primary-navigation a {
  display:block;
  padding:1em;
  text-decoration:none;
  color:inherit;
}
.site-header button.menu-toggle {
  background:none;
  border:0;
  cursor:pointer;
  padding:.5em;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:0;
}
.site-header button.menu-toggle .icon { width:24px; height:24px; fill:currentColor; }
/* Global: tutti i link 500 (fallback se il theme.json non è caricato) */
/* Fallback: tutti i link semi-bold (se il theme.json non è caricato) */
a { font-weight: 600; } /* fallback globale */

/* Home: griglia articoli 3 / 2 / 1 colonne */
.blog .wp-block-post-template {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: clamp(1rem, 2vw, 2rem);
}

@media (max-width: 1024px) {
  .blog .wp-block-post-template { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 640px) {
  .blog .wp-block-post-template { grid-template-columns: 1fr; }
}

/* Card articolo */
.blog .wp-block-group.single {  
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: .2rem;
  padding: 1rem;
  height: 100%;
}

/* Immagine in evidenza nella card */
.blog .wp-block-group.single .wp-block-post-featured-image { 
  margin: 0; 
  border-radius: .5rem; 
  overflow: hidden; 
}

.blog .wp-block-group.single .wp-block-post-featured-image img {
  display: block;
  width: 100%;
  height: auto;
  aspect-ratio: 16/9;
  object-fit: cover;
}

/* Testi card */
.blog .wp-block-group.single .wp-block-post-title { margin: .25rem 0 0; }
.blog .wp-block-group.single .wp-block-post-title a {
  text-decoration: none;
  font-weight: 600;
  color: var(--wp--preset--color--fg);
}
.blog .wp-block-group.single .wp-block-post-date,
.blog .wp-block-group.single .wp-block-post-terms {
  color: var(--wp--preset--color--muted);
  font-size: .8rem;
  margin-block-start: 0;
}

/* Read more */
.blog .wp-block-group.single .wp-block-read-more .wp-element-button {
  border-radius: .5rem;
  padding: .625rem 1rem;
  margin-top: .25rem;
  align-self: flex-start;
}

.blog .wp-block-post-excerpt {
  margin-top:0;
}

.blog .wp-element-button, .wp-block-button__link {
  margin-block-start: 0;
  padding: .3rem;
}

/* Footer wrappers: no external margins */
.footer-top,
.site-footer {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* If you previously had margin-top on .site-footer, replace it with 0 */
/* .site-footer { margin-top:2rem; }  /* remove this if present */
.site-footer {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* Header navigation: usa gap separati */
.site-header .wp-block-navigation .wp-block-navigation__container {
  column-gap: var(--wp--custom--flex--gap-x, 2rem);
  row-gap: var(--wp--custom--flex--gap-y, 1.25rem);
}

/* Griglia articoli (blog) */
.blog .wp-block-post-template {
  column-gap: var(--wp--custom--flex--gap-x, 2rem);
  row-gap: var(--wp--custom--flex--gap-y, 1.25rem);
}

/* Variante compatta */
.blog.compact .wp-block-post-template {
  column-gap: var(--wp--custom--flex--gap-x-small, 1rem);
  row-gap: var(--wp--custom--flex--gap-y-small, 0.75rem);
}

/* Variante larga (se serve in futuro)
.blog.wide-gaps .wp-block-post-template {
  column-gap: var(--wp--custom--flex--gap-x-large, 3rem);
  row-gap: var(--wp--custom--flex--gap-y-large, 2rem);
}
*/

/* RIMOSSI: vecchi riferimenti a gap: var(--wp--custom--flex--gap,2rem); */

/* Default header height variable (solo riferimento, non forzata */
:root {
  --flixbe-header-height: 80px;
}

/* Header: niente height fissa */
.site-header {
  /* height: var(--flixbe-header-height);  REMOVED */
  /* min-height opzionale se vuoi un minimo: decommenta la riga sotto */
  /* min-height: var(--flixbe-header-height); */
  display: flex;
  align-items: center;
}

/* Stato scrolled: rimosso override height */
/*
.site-header.is-scrolled { height: var(--flixbe-header-height-scrolled); }
*/

/* Body offset: se vuoi togliere il compenso fisso rimuovi questa proprietà */
body {
  /* padding-top: var(--flixbe-header-height);  REMOVED */
}

/* Mobile: rimosse le altezze */
@media (max-width:782px){
  .site-header {
    /* height: var(--flixbe-header-height-mobile);  REMOVED */
    /* min-height: var(--flixbe-header-height-mobile); (opzionale) */
  }
  body {
    /* padding-top: var(--flixbe-header-height-mobile); REMOVED */
  }
}